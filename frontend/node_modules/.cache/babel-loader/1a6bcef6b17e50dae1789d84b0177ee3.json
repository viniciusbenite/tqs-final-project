{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joaoc\\\\Desktop\\\\TQS\\\\tqs-final-project\\\\frontend\\\\src\\\\pages\\\\SingleCabeleireiro.js\";\nimport React, { Component } from 'react';\nimport defaultBcg from '../images/cabeleireiro1.jpg';\nimport Banner from '../components/Banner';\nimport { Link } from 'react-router-dom';\nimport { CabeleireirosContext } from '../context';\nimport StyledHero from '../components/StyledHero';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio\";\nimport NavbarCliente from \"../components/NavbarCliente\";\nimport NavbarDono from \"../components/NavbarDono\";\nimport api from \"../services/api\";\nimport { getDayOfWeek } from \"react-calendar/dist/umd/shared/dates\";\nexport default class SingleCabeleireiro extends Component {\n  componentDidMount() {\n    this.GetServices();\n  }\n\n  GetServices() {\n    api.get(\"/service/\").then(res => {\n      this.setState({\n        servicos: res.data\n      });\n      let names = [];\n      let tempDic = {};\n      let data = res.data;\n\n      for (const i in data) {\n        if (data[i].saloon.id == parseInt(this.props.match.params.slug)) {\n          tempDic[\"value\"] = data[i].name;\n          tempDic[\"label\"] = data[i].name;\n          names.push(tempDic);\n          tempDic = {};\n        }\n      }\n\n      this.setState({\n        servicosName: names\n      });\n    });\n  }\n\n  handleChangeService(event) {\n    this.setState({\n      servico: event.target.value\n    });\n    let x = event.target.value;\n    api.get(\"/schedule/\").then(rSch => {\n      let dataSch = rSch.data;\n      let hor = [];\n      let tempDic = {};\n\n      for (const n in dataSch) {\n        if (dataSch[n].service.saloon.id == parseInt(this.props.match.params.slug)) {\n          if (x == dataSch[n].service.name) {\n            this.setState({\n              serv: dataSch[n].service.id\n            });\n            tempDic[\"value\"] = dataSch[n].startTime;\n            tempDic[\"label\"] = dataSch[n].startTime;\n            hor.push(tempDic);\n            tempDic = {};\n          }\n        }\n      }\n\n      this.setState({\n        horarios: hor\n      });\n    });\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleChangeDate = date => {\n      this.setState({\n        startDate: date\n      });\n      this.setState({\n        isActive: true\n      });\n    };\n\n    this.handleSubmit = async event => {\n      const {\n        serv,\n        hour,\n        startDate,\n        slug\n      } = this.state;\n      event.preventDefault();\n      let dateFinal = startDate.toString().split(\" \");\n      dateFinal = dateFinal[2] + \" \" + dateFinal[1] + \" \" + dateFinal[3];\n\n      try {\n        console.log(serv);\n        console.log(dateFinal);\n        console.log(hour);\n        console.log(slug);\n        await api.get(\"/service/\").then(resSer => {\n          let dataresSer = resSer.data;\n\n          for (const n in dataresSer) {\n            if (dataresSer[n].id == parseInt(serv)) {\n              console.log(dataresSer[n]);\n              api.post(\"/reservation/\", {\n                date: dateFinal,\n                time: hour,\n                services: dataresSer[n]\n              }).then();\n            }\n          }\n        });\n        alert(\"Reservation done!\");\n        await api.get(\"/schedule/\").then(rHor => {\n          let datarHor = rHor.data;\n\n          for (const n in datarHor) {\n            if (datarHor[n].startTime == hour) {\n              if (datarHor[n].service.id == parseInt(serv)) {\n                if (datarHor[n].service.id == parseInt(serv)) {\n                  console.log(datarHor[n].id);\n                }\n              }\n            }\n          }\n        });\n        this.props.history.push(\"/marcacoes/\");\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.state = {\n      slug: parseInt(this.props.match.params.slug),\n      defaultBcg,\n      servico: \"\",\n      hour: \"\",\n      isActive: false,\n      servicos: [],\n      servicosName: [],\n      horarios: [],\n      serv: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n  }\n\n  // componentDidMount() {}\n  render() {\n    const {\n      getCabeleireiro\n    } = this.context;\n    const cabeleireiro = getCabeleireiro(this.state.slug);\n\n    if (!cabeleireiro) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      }, \"Este cabeleireiro n\\xE3o existe\"), /*#__PURE__*/React.createElement(Link, {\n        to: \"/cabeleireiros\",\n        className: \"btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 17\n        }\n      }, \"back to cabeleireiros\"));\n    }\n\n    const {\n      nome,\n      cidade,\n      descricao,\n      imagens\n    } = cabeleireiro; //this.setState({cabeleireiroName: nome});\n\n    const [mainImg, ...defaultImg] = imagens;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, localStorage.getItem(\"user_type\") == \"dono\" ? /*#__PURE__*/React.createElement(NavbarDono, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 54\n      }\n    }) : /*#__PURE__*/React.createElement(NavbarCliente, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 80\n      }\n    }), /*#__PURE__*/React.createElement(StyledHero, {\n      img: mainImg || this.state.defaultBcg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Banner, {\n      title: `${nome}`,\n      subtitle: \"Fa\\xE7a j\\xE1 a sua marca\\xE7\\xE3o!\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/cabeleireiros\",\n      className: \"btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, \"voltar\"))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"single-cabeleireiro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"single-cabeleireiro-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"article\", {\n      className: \"desc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, \"detalhes\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, descricao)), /*#__PURE__*/React.createElement(\"article\", {\n      className: \"info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cabeleireiro-extras\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }, \"Servi\\xE7os dispon\\xEDveis\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"service_option\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, \"Pick your Service:\", /*#__PURE__*/React.createElement(\"select\", {\n      name: \"servico\",\n      value: this.state.servico,\n      onChange: this.handleChangeService,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }\n    }, this.state.servicosName.map((e, key) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: key,\n        value: e.value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 36\n        }\n      }, e.label);\n    }))), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, \"Choose an available day:\", /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"calendar\",\n      selected: this.state.startDate,\n      onChange: this.handleChangeDate,\n      minDate: new Date(),\n      withPortal: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, this.state.isActive ? /*#__PURE__*/React.createElement(FormControl, {\n      component: \"fieldset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 29\n      }\n    }, \"Select a available hour:\", /*#__PURE__*/React.createElement(RadioGroup, {\n      \"aria-label\": \"time\",\n      name: \"hour\",\n      value: this.state.hour,\n      onChange: e => this.setState({\n        hour: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 33\n      }\n    }, this.state.horarios.map((e, key) => {\n      return /*#__PURE__*/React.createElement(FormControlLabel, {\n        key: key,\n        value: e.value,\n        control: /*#__PURE__*/React.createElement(Radio, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 102\n          }\n        }),\n        label: e.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 48\n        }\n      });\n    })))) : null), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cabeleireiro-extras\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\nSingleCabeleireiro.contextType = CabeleireirosContext;","map":{"version":3,"sources":["C:/Users/joaoc/Desktop/TQS/tqs-final-project/frontend/src/pages/SingleCabeleireiro.js"],"names":["React","Component","defaultBcg","Banner","Link","CabeleireirosContext","StyledHero","DatePicker","FormControlLabel","FormControl","RadioGroup","Radio","NavbarCliente","NavbarDono","api","getDayOfWeek","SingleCabeleireiro","componentDidMount","GetServices","get","then","res","setState","servicos","data","names","tempDic","i","saloon","id","parseInt","props","match","params","slug","name","push","servicosName","handleChangeService","event","servico","target","value","x","rSch","dataSch","hor","n","service","serv","startTime","horarios","constructor","handleChangeDate","date","startDate","isActive","handleSubmit","hour","state","preventDefault","dateFinal","toString","split","console","log","resSer","dataresSer","post","time","services","alert","rHor","datarHor","history","err","bind","render","getCabeleireiro","context","cabeleireiro","nome","cidade","descricao","imagens","mainImg","defaultImg","localStorage","getItem","map","e","key","label","Date","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport defaultBcg from '../images/cabeleireiro1.jpg';\r\nimport Banner from '../components/Banner';\r\nimport { Link } from 'react-router-dom';\r\nimport { CabeleireirosContext } from '../context';\r\nimport StyledHero from '../components/StyledHero';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport NavbarCliente from \"../components/NavbarCliente\";\r\nimport NavbarDono from \"../components/NavbarDono\";\r\nimport api from \"../services/api\";\r\nimport {getDayOfWeek} from \"react-calendar/dist/umd/shared/dates\";\r\n\r\n\r\nexport default class SingleCabeleireiro extends Component {\r\n\r\n    componentDidMount() {\r\n        this.GetServices();\r\n    }\r\n\r\n    GetServices (){\r\n        api.get(\"/service/\").then(res => {\r\n            this.setState({\r\n                servicos: res.data,\r\n\r\n            })\r\n            let names =  [];\r\n            let tempDic = {};\r\n            let data = res.data;\r\n            for (const i in data){\r\n                if(data[i].saloon.id == parseInt(this.props.match.params.slug)){\r\n                    tempDic[\"value\"] = data[i].name;\r\n                    tempDic[\"label\"] = data[i].name;\r\n                    names.push(tempDic);\r\n                    tempDic = {};\r\n               }\r\n            }\r\n            this.setState({\r\n                servicosName: names,\r\n            })\r\n        });\r\n    }\r\n\r\n\r\n    handleChangeDate = date => {\r\n        this.setState({\r\n            startDate: date\r\n        });\r\n        this.setState({\r\n            isActive: true\r\n        })\r\n    };\r\n\r\n    handleChangeService(event) {\r\n        this.setState({servico: event.target.value});\r\n        let x = event.target.value;\r\n        api.get(\"/schedule/\").then(rSch =>{\r\n            let dataSch = rSch.data;\r\n            let hor =  [];\r\n            let tempDic = {};\r\n            for (const n in dataSch) {\r\n                if(dataSch[n].service.saloon.id == parseInt(this.props.match.params.slug)){\r\n                    if(x == dataSch[n].service.name){\r\n                        this.setState({\r\n                            serv: dataSch[n].service.id,\r\n                        })\r\n                        tempDic[\"value\"] = dataSch[n].startTime;\r\n                        tempDic[\"label\"] = dataSch[n].startTime;\r\n                        hor.push(tempDic);\r\n                        tempDic = {};\r\n                    }\r\n                }\r\n            }\r\n            this.setState({\r\n                horarios: hor,\r\n            })\r\n\r\n        })\r\n    }\r\n\r\n        handleSubmit = async event => {\r\n            const { serv, hour, startDate,slug } = this.state;\r\n            event.preventDefault();\r\n\r\n            let dateFinal = startDate.toString().split(\" \");\r\n            dateFinal = dateFinal[2] +\" \"+ dateFinal[1] +\" \"+ dateFinal[3];\r\n\r\n            try {\r\n                console.log(serv)\r\n                console.log(dateFinal)\r\n                console.log(hour);\r\n                console.log(slug);\r\n\r\n                await api.get(\"/service/\").then(resSer =>{\r\n                    let dataresSer = resSer.data;\r\n                    for (const n in dataresSer) {\r\n                        if(dataresSer[n].id == parseInt(serv)){\r\n                            console.log(dataresSer[n])\r\n                            api.post(\"/reservation/\", {date: dateFinal, time: hour, services: dataresSer[n]}).then();\r\n                        }\r\n                    }\r\n                })\r\n                alert(\"Reservation done!\")\r\n                await api.get(\"/schedule/\",).then(rHor =>{\r\n                    let datarHor = rHor.data;\r\n                    for (const n in datarHor) {\r\n                        if(datarHor[n].startTime == hour){\r\n                            if(datarHor[n].service.id == parseInt(serv)){\r\n                                if(datarHor[n].service.id == parseInt(serv)){\r\n                                    console.log(datarHor[n].id)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                })\r\n                this.props.history.push(\"/marcacoes/\");\r\n\r\n              } catch (err) {\r\n                console.log(err);\r\n              }\r\n\r\n        }\r\n\r\n        constructor(props) {\r\n            super(props);\r\n        this.state = {\r\n            slug: parseInt(this.props.match.params.slug),\r\n            defaultBcg,\r\n            servico: \"\",\r\n            hour: \"\",\r\n            isActive: false,\r\n            servicos: [],\r\n            servicosName:[],\r\n            horarios: [],\r\n            serv:\"\",\r\n        };\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n            this.handleChangeService = this.handleChangeService.bind(this);\r\n    }\r\n\r\n    static contextType = CabeleireirosContext;\r\n\r\n   // componentDidMount() {}\r\n    render() {\r\n        const { getCabeleireiro } = this.context;\r\n        const cabeleireiro = getCabeleireiro(this.state.slug);\r\n\r\n        if (!cabeleireiro) {\r\n            return <div className=\"error\">\r\n                <h3>Este cabeleireiro não existe</h3>\r\n                <Link to='/cabeleireiros' className=\"btn-primary\">back to cabeleireiros</Link>\r\n                </div>\r\n        }\r\n        const {nome, cidade, descricao, imagens} = cabeleireiro;\r\n        //this.setState({cabeleireiroName: nome});\r\n        const [mainImg,...defaultImg] = imagens;\r\n        return(\r\n        <>\r\n        {localStorage.getItem(\"user_type\")==\"dono\" ? <NavbarDono></NavbarDono>:<NavbarCliente></NavbarCliente> }\r\n        <StyledHero img={mainImg ||\r\n          this.state.defaultBcg}>\r\n            <Banner title={`${nome}`} subtitle='Faça já a sua marcação!'>\r\n                <Link to=\"/cabeleireiros\" className=\"btn-primary\">\r\n                    voltar\r\n            </Link>\r\n            </Banner>\r\n        </StyledHero>\r\n\r\n            <section className=\"single-cabeleireiro\">\r\n                <div className=\"single-cabeleireiro-info\">\r\n                <article className=\"desc\">\r\n                <h3>detalhes</h3>\r\n                <p>{descricao}</p>\r\n                </article>\r\n                    <article className=\"info\">\r\n                    </article>\r\n                </div>\r\n          </section>\r\n        <section className=\"cabeleireiro-extras\">\r\n        <h6>Serviços disponíveis</h6>\r\n\r\n        </section>\r\n        <div className=\"service_option\">\r\n            <form onSubmit={this.handleSubmit}>\r\n                <label>\r\n                    Pick your Service:\r\n                    <select name=\"servico\" value={this.state.servico} onChange={this.handleChangeService}>\r\n                        {this.state.servicosName.map((e, key) => {\r\n                            return <option key={key} value={e.value}>{e.label}</option>;\r\n                        })}\r\n                    </select>\r\n                </label>\r\n                <label>\r\n                    Choose an available day:\r\n                    <DatePicker className=\"calendar\"\r\n                                selected={this.state.startDate}\r\n                                onChange={this.handleChangeDate}\r\n                                minDate={new Date()}\r\n                                withPortal\r\n\r\n                    />\r\n                </label>\r\n                <div>\r\n                    {this.state.isActive ?\r\n                        <FormControl component=\"fieldset\">\r\n                            <label>Select a available hour:\r\n                                <RadioGroup aria-label=\"time\" name=\"hour\" value={this.state.hour}\r\n                                            onChange={e => this.setState({ hour: e.target.value })}>\r\n                                    {this.state.horarios.map((e, key) => {\r\n                                        return <FormControlLabel key={key} value={e.value}  control={<Radio/>} label={e.label}/>;\r\n                                    })}\r\n                                </RadioGroup>\r\n                            </label>\r\n                        </FormControl>\r\n                        : null}\r\n                </div>\r\n                <input type=\"submit\" value=\"Submit\" />\r\n            </form>\r\n        </div>\r\n        <section className=\"cabeleireiro-extras\">\r\n        </section>\r\n        </>\r\n      );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}