{"ast":null,"code":"var _jsxFileName = \"/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/src/pages/SingleBarbeiro.js\";\nimport React, { Component } from 'react';\nimport defaultBcg from '../images/barbeiros.jpg';\nimport Banner from '../components/Banner';\nimport { Link } from 'react-router-dom';\nimport { CabeleireirosContext } from '../context';\nimport StyledHero from '../components/StyledHero';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio\";\nimport NavbarCliente from \"../components/NavbarCliente\";\nimport NavbarDono from \"../components/NavbarDono\";\nimport api from \"../services/api\";\nexport default class SingleBarbeiro extends Component {\n  componentDidMount() {\n    this.GetServices();\n  }\n\n  GetServices() {\n    api.get(\"/service/\").then(res => {\n      this.setState({\n        servicos: res.data\n      });\n      let names = [];\n      let tempDic = {};\n      let data = res.data;\n\n      for (const i in data) {\n        if (data[i].saloon.id == parseInt(this.props.match.params.slug)) {\n          tempDic[\"value\"] = data[i].name;\n          tempDic[\"label\"] = data[i].name;\n          names.push(tempDic);\n          tempDic = {};\n        }\n      }\n\n      this.setState({\n        servicosName: names\n      });\n    });\n  }\n\n  handleChangeService(event) {\n    this.setState({\n      servico: event.target.value\n    });\n    let x = event.target.value;\n    api.get(\"/schedule/\").then(rSch => {\n      let dataSch = rSch.data;\n      let hor = [];\n      let tempDic = {};\n\n      for (const n in dataSch) {\n        if (dataSch[n].service.saloon.id == parseInt(this.props.match.params.slug)) {\n          if (x == dataSch[n].service.name) {\n            this.setState({\n              serv: dataSch[n].service.id\n            });\n            tempDic[\"value\"] = dataSch[n].startTime;\n            tempDic[\"label\"] = dataSch[n].startTime;\n            hor.push(tempDic);\n            tempDic = {};\n          }\n        }\n      }\n\n      this.setState({\n        horarios: hor\n      });\n    });\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleChangeDate = date => {\n      this.setState({\n        startDate: date\n      });\n      this.setState({\n        isActive: true\n      });\n    };\n\n    this.handleSubmit = async event => {\n      const {\n        serv,\n        hour,\n        startDate,\n        slug\n      } = this.state;\n      event.preventDefault();\n      let dateFinal = startDate.toString().split(\" \");\n      dateFinal = dateFinal[2] + \" \" + dateFinal[1] + \" \" + dateFinal[3];\n\n      try {\n        console.log(serv);\n        console.log(dateFinal);\n        console.log(hour);\n        console.log(slug);\n        await api.get(\"/user/\").then(function (response) {\n          let data = response.data;\n          let res;\n\n          for (const i in data) {\n            for (const n in data[i]) {\n              if (data[i].email === localStorage.getItem(\"user_email\")) {\n                res = data[i];\n              }\n            }\n          }\n\n          api.get(\"/service/\").then(resSer => {\n            let dataresSer = resSer.data;\n\n            for (const n in dataresSer) {\n              if (dataresSer[n].id == parseInt(serv)) {\n                console.log(dataresSer[n]);\n                api.post(\"/reservation/\", {\n                  date: dateFinal,\n                  time: hour,\n                  users: res,\n                  services: dataresSer[n]\n                }).then();\n              }\n            }\n          });\n        });\n        alert(\"Reservation done!\");\n        await api.get(\"/schedule/\").then(rHor => {\n          let datarHor = rHor.data;\n\n          for (const n in datarHor) {\n            if (datarHor[n].startTime == hour) {\n              if (datarHor[n].service.id == parseInt(serv)) {\n                if (datarHor[n].service.id == parseInt(serv)) {\n                  console.log(datarHor[n].id);\n                }\n              }\n            }\n          }\n        });\n        this.props.history.push(\"/home\");\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.state = {\n      slug: parseInt(this.props.match.params.slug),\n      defaultBcg,\n      servico: \"\",\n      hour: \"\",\n      isActive: false,\n      servicos: [],\n      servicosName: [],\n      horarios: [],\n      serv: \"\"\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n  }\n\n  // componentDidMount() {}\n  render() {\n    const {\n      getBarbeiro\n    } = this.context;\n    const barbeiro = getBarbeiro(this.state.slug);\n\n    if (!barbeiro) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 17\n        }\n      }, \"Este cabeleireiro n\\xE3o existe\"), /*#__PURE__*/React.createElement(Link, {\n        to: \"/cabeleireiros\",\n        className: \"btn-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }\n      }, \"back to cabeleireiros\"));\n    }\n\n    const {\n      nome,\n      cidade,\n      descricao,\n      imagens\n    } = barbeiro; //this.setState({cabeleireiroName: nome});\n\n    const [mainImg, ...defaultImg] = imagens;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, localStorage.getItem(\"user_type\") == \"dono\" ? /*#__PURE__*/React.createElement(NavbarDono, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 62\n      }\n    }) : /*#__PURE__*/React.createElement(NavbarCliente, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 88\n      }\n    }), /*#__PURE__*/React.createElement(StyledHero, {\n      img: mainImg || this.state.defaultBcg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Banner, {\n      title: `${nome}`,\n      subtitle: \"Fa\\xE7a j\\xE1 a sua marca\\xE7\\xE3o!\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/barbeiros\",\n      className: \"btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }, \"voltar\"))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"single-cabeleireiro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"single-cabeleireiro-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"article\", {\n      className: \"desc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }, \"detalhes\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    }, descricao)), /*#__PURE__*/React.createElement(\"article\", {\n      className: \"info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cabeleireiro-extras\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, \"Servi\\xE7os dispon\\xEDveis\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"service_option\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, \"Pick your Service:\", /*#__PURE__*/React.createElement(\"select\", {\n      name: \"servico\",\n      value: this.state.servico,\n      onChange: this.handleChangeService,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 29\n      }\n    }, this.state.servicosName.map((e, key) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: key,\n        value: e.value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 44\n        }\n      }, e.label);\n    }))), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 25\n      }\n    }, \"Choose an available day:\", /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"calendar\",\n      selected: this.state.startDate,\n      onChange: this.handleChangeDate,\n      minDate: new Date(),\n      withPortal: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 25\n      }\n    }, this.state.isActive ? /*#__PURE__*/React.createElement(FormControl, {\n      component: \"fieldset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 37\n      }\n    }, \"Select a available hour:\", /*#__PURE__*/React.createElement(RadioGroup, {\n      \"aria-label\": \"time\",\n      name: \"hour\",\n      value: this.state.hour,\n      onChange: e => this.setState({\n        hour: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 41\n      }\n    }, this.state.horarios.map((e, key) => {\n      return /*#__PURE__*/React.createElement(FormControlLabel, {\n        key: key,\n        value: e.value,\n        control: /*#__PURE__*/React.createElement(Radio, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 110\n          }\n        }),\n        label: e.label,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 56\n        }\n      });\n    })))) : null), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cabeleireiro-extras\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\nSingleBarbeiro.contextType = CabeleireirosContext;","map":{"version":3,"sources":["/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/src/pages/SingleBarbeiro.js"],"names":["React","Component","defaultBcg","Banner","Link","CabeleireirosContext","StyledHero","DatePicker","FormControlLabel","FormControl","RadioGroup","Radio","NavbarCliente","NavbarDono","api","SingleBarbeiro","componentDidMount","GetServices","get","then","res","setState","servicos","data","names","tempDic","i","saloon","id","parseInt","props","match","params","slug","name","push","servicosName","handleChangeService","event","servico","target","value","x","rSch","dataSch","hor","n","service","serv","startTime","horarios","constructor","handleChangeDate","date","startDate","isActive","handleSubmit","hour","state","preventDefault","dateFinal","toString","split","console","log","response","email","localStorage","getItem","resSer","dataresSer","post","time","users","services","alert","rHor","datarHor","history","err","bind","render","getBarbeiro","context","barbeiro","nome","cidade","descricao","imagens","mainImg","defaultImg","map","e","key","label","Date","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport defaultBcg from '../images/barbeiros.jpg';\nimport Banner from '../components/Banner';\nimport { Link } from 'react-router-dom';\nimport { CabeleireirosContext } from '../context';\nimport StyledHero from '../components/StyledHero';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio\";\nimport NavbarCliente from \"../components/NavbarCliente\";\nimport NavbarDono from \"../components/NavbarDono\";\nimport api from \"../services/api\";\n\n\nexport default class SingleBarbeiro extends Component {\n\n    componentDidMount() {\n        this.GetServices();\n    }\n\n    GetServices (){\n        api.get(\"/service/\").then(res => {\n            this.setState({\n                servicos: res.data,\n\n            })\n            let names =  [];\n            let tempDic = {};\n            let data = res.data;\n            for (const i in data){\n                if(data[i].saloon.id == parseInt(this.props.match.params.slug)){\n                    tempDic[\"value\"] = data[i].name;\n                    tempDic[\"label\"] = data[i].name;\n                    names.push(tempDic);\n                    tempDic = {};\n                }\n            }\n            this.setState({\n                servicosName: names,\n            })\n        });\n    }\n\n\n    handleChangeDate = date => {\n        this.setState({\n            startDate: date\n        });\n        this.setState({\n            isActive: true\n        })\n    };\n\n    handleChangeService(event) {\n        this.setState({servico: event.target.value});\n        let x = event.target.value;\n        api.get(\"/schedule/\").then(rSch =>{\n            let dataSch = rSch.data;\n            let hor =  [];\n            let tempDic = {};\n            for (const n in dataSch) {\n                if(dataSch[n].service.saloon.id == parseInt(this.props.match.params.slug)){\n                    if(x == dataSch[n].service.name){\n                        this.setState({\n                            serv: dataSch[n].service.id,\n                        })\n                        tempDic[\"value\"] = dataSch[n].startTime;\n                        tempDic[\"label\"] = dataSch[n].startTime;\n                        hor.push(tempDic);\n                        tempDic = {};\n                    }\n                }\n            }\n            this.setState({\n                horarios: hor,\n            })\n\n        })\n    }\n\n    handleSubmit = async event => {\n        const { serv, hour, startDate,slug } = this.state;\n        event.preventDefault();\n\n        let dateFinal = startDate.toString().split(\" \");\n        dateFinal = dateFinal[2] +\" \"+ dateFinal[1] +\" \"+ dateFinal[3];\n\n        try {\n            console.log(serv)\n            console.log(dateFinal)\n            console.log(hour);\n            console.log(slug);\n\n            await api.get(\"/user/\").then(function (response) {\n                let data = response.data;\n                let res;\n                for (const i in data) {\n                    for (const n in data[i]) {\n                        if (data[i].email === localStorage.getItem(\"user_email\")) {\n                            res = data[i];\n                        }\n                    }\n                }\n                api.get(\"/service/\").then(resSer => {\n                    let dataresSer = resSer.data;\n                    for (const n in dataresSer) {\n                        if (dataresSer[n].id == parseInt(serv)) {\n                            console.log(dataresSer[n])\n                            api.post(\"/reservation/\", {\n                                date: dateFinal,\n                                time: hour,\n                                users: res,\n                                services: dataresSer[n]\n                            }).then();\n                        }\n                    }\n                })\n            })\n\n\n            alert(\"Reservation done!\")\n            await api.get(\"/schedule/\",).then(rHor =>{\n                let datarHor = rHor.data;\n                for (const n in datarHor) {\n                    if(datarHor[n].startTime == hour){\n                        if(datarHor[n].service.id == parseInt(serv)){\n                            if(datarHor[n].service.id == parseInt(serv)){\n                                console.log(datarHor[n].id)\n                            }\n                        }\n                    }\n                }\n\n            })\n            this.props.history.push(\"/home\");\n\n        } catch (err) {\n            console.log(err);\n        }\n\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            slug: parseInt(this.props.match.params.slug),\n            defaultBcg,\n            servico: \"\",\n            hour: \"\",\n            isActive: false,\n            servicos: [],\n            servicosName:[],\n            horarios: [],\n            serv:\"\",\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChangeService = this.handleChangeService.bind(this);\n    }\n\n    static contextType = CabeleireirosContext;\n\n    // componentDidMount() {}\n    render() {\n        const { getBarbeiro } = this.context;\n        const barbeiro = getBarbeiro(this.state.slug);\n\n        if (!barbeiro) {\n            return <div className=\"error\">\n                <h3>Este cabeleireiro não existe</h3>\n                <Link to='/cabeleireiros' className=\"btn-primary\">back to cabeleireiros</Link>\n            </div>\n        }\n        const {nome, cidade, descricao, imagens} = barbeiro;\n        //this.setState({cabeleireiroName: nome});\n        const [mainImg,...defaultImg] = imagens;\n        return(\n            <>\n                {localStorage.getItem(\"user_type\")==\"dono\" ? <NavbarDono></NavbarDono>:<NavbarCliente></NavbarCliente> }\n                <StyledHero img={mainImg ||\n                this.state.defaultBcg}>\n                    <Banner title={`${nome}`} subtitle='Faça já a sua marcação!'>\n                        <Link to=\"/barbeiros\" className=\"btn-primary\">\n                            voltar\n                        </Link>\n                    </Banner>\n                </StyledHero>\n\n                <section className=\"single-cabeleireiro\">\n                    <div className=\"single-cabeleireiro-info\">\n                        <article className=\"desc\">\n                            <h3>detalhes</h3>\n                            <p>{descricao}</p>\n                        </article>\n                        <article className=\"info\">\n                        </article>\n                    </div>\n                </section>\n                <section className=\"cabeleireiro-extras\">\n                    <h6>Serviços disponíveis</h6>\n\n                </section>\n                <div className=\"service_option\">\n                    <form onSubmit={this.handleSubmit}>\n                        <label>\n                            Pick your Service:\n                            <select name=\"servico\" value={this.state.servico} onChange={this.handleChangeService}>\n                                {this.state.servicosName.map((e, key) => {\n                                    return <option key={key} value={e.value}>{e.label}</option>;\n                                })}\n                            </select>\n                        </label>\n                        <label>\n                            Choose an available day:\n                            <DatePicker className=\"calendar\"\n                                        selected={this.state.startDate}\n                                        onChange={this.handleChangeDate}\n                                        minDate={new Date()}\n                                        withPortal\n\n                            />\n                        </label>\n                        <div>\n                            {this.state.isActive ?\n                                <FormControl component=\"fieldset\">\n                                    <label>Select a available hour:\n                                        <RadioGroup aria-label=\"time\" name=\"hour\" value={this.state.hour}\n                                                    onChange={e => this.setState({ hour: e.target.value })}>\n                                            {this.state.horarios.map((e, key) => {\n                                                return <FormControlLabel key={key} value={e.value}  control={<Radio/>} label={e.label}/>;\n                                            })}\n                                        </RadioGroup>\n                                    </label>\n                                </FormControl>\n                                : null}\n                        </div>\n                        <input type=\"submit\" value=\"Submit\" />\n                    </form>\n                </div>\n                <section className=\"cabeleireiro-extras\">\n                </section>\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}