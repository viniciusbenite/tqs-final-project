{"ast":null,"code":"import _toConsumableArray from\"/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Fragment,Component}from'react';import AddCabeleireiroForm from'../crud/AddCabeleireiroForm';import EditCabeleireiroForm from'../crud/EditCabeleireiroForm';import CabeleireiroTable from'../crud/CabeleireiroTable';import NavbarDono from\"../components/NavbarDono\";import'../crud/style.css';import api from\"../services/api\";import NavbarCliente from\"../components/NavbarCliente\";var Gestao=/*#__PURE__*/function(_Component){_inherits(Gestao,_Component);var _super=_createSuper(Gestao);function Gestao(){var _this;_classCallCheck(this,Gestao);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={cabeleireiros:[],currentCabeleireiro:{},editing:false};return _this;}_createClass(Gestao,[{key:\"componentDidMount\",value:function componentDidMount(){this.GetSaloons();}},{key:\"GetSaloons\",value:function GetSaloons(){var _this2=this;api.get(\"/saloon/\").then(function(res){var dataRes=res.data;var _loop=function _loop(n){if(dataRes[n].owner.email==localStorage.getItem(\"user_email\")){_this2.setState(function(prevState){return{cabeleireiros:[].concat(_toConsumableArray(prevState.cabeleireiros),[dataRes[n]])};});}};for(var n in dataRes){_loop(n);}});}},{key:\"render\",value:function render(){var _this3=this;var initialFormState={id:null,name:\"\",postalCode:\"\",city:\"\",country:\"\",status:\"\",type:\"\",contact:\"\",description:\"\",address:\"\"};// Setting state\n/*const [cabeleireiros, setCabeleireiros] = useState(cabeleireirosData);\n\t\tconst [currentCabeleireiro, setCurrentCabeleireiro] = useState(initialFormState);\n\t\tconst [editing, setEditing] = useState(false);*/ // CRUD operations\nvar addCabeleireiro=function addCabeleireiro(cabeleireiro){cabeleireiro.id=_this3.state.cabeleireiros.length+1;//this.state.setCabeleireiros([...this.state.cabeleireiros, cabeleireiro])\n_this3.setState({cabeleireiros:[].concat(_toConsumableArray(_this3.state.cabeleireiros),[cabeleireiro])});};var deleteCabeleireiro=function deleteCabeleireiro(id){_this3.setState({editing:false});//this.state.setCabeleireiros(this.state.cabeleireiros.filter(cabeleireiro => cabeleireiro.id !== id))\n_this3.setState({cabeleireiros:_this3.state.cabeleireiros.filter(function(cabeleireiro){return cabeleireiro.id!==id;})});api.get('/schedule/').then(function(r){var datar=r.data;var _loop2=function _loop2(i){if(datar[i].service.saloon.id==parseInt(id)){api.delete('/schedule/'+datar[i].id).then(function(res){api.delete('/service/'+datar[i].service.id).then(function(resser){api.delete('/saloon/'+id).then(function(ressal){});});});}};for(var i in datar){_loop2(i);}});};var updateCabeleireiro=function updateCabeleireiro(id,updatedCabeleireiro){_this3.setState({editing:false});//this.state.setCabeleireiros(this.state.cabeleireiros.map(cabeleireiro => (cabeleireiro.id === id ? updatedCabeleireiro : cabeleireiro)))\n_this3.setState({cabeleireiros:_this3.state.cabeleireiros.map(function(cabeleireiro){return cabeleireiro.id===id?updatedCabeleireiro:cabeleireiro;})});};var editRow=function editRow(cabeleireiro){_this3.setState({editing:true});_this3.setState({currentCabeleireiro:{id:cabeleireiro.id,name:cabeleireiro.name,city:cabeleireiro.city,postalCode:cabeleireiro.postalCode,country:cabeleireiro.country,status:cabeleireiro.status,type:cabeleireiro.type,contact:cabeleireiro.contact,description:cabeleireiro.description,address:cabeleireiro.address}});};return/*#__PURE__*/React.createElement(React.Fragment,null,localStorage.getItem(\"user_type\")==\"dono\"?/*#__PURE__*/React.createElement(NavbarDono,null):/*#__PURE__*/React.createElement(NavbarCliente,null),/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(NavbarDono,null),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Gest\\xE3o dos meus sal\\xF5es\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flex-large\"},this.state.editing?/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Editar sal\\xE3o\"),/*#__PURE__*/React.createElement(EditCabeleireiroForm,{editing:this.state.editing,setEditing:this.state.setEditing,currentCabeleireiro:this.state.currentCabeleireiro,updateCabeleireiro:updateCabeleireiro})):/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Adicionar sal\\xE3o\"),/*#__PURE__*/React.createElement(AddCabeleireiroForm,{addCabeleireiro:addCabeleireiro}))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-large\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Ver sal\\xF5es\"),/*#__PURE__*/React.createElement(CabeleireiroTable,{cabeleireiros:this.state.cabeleireiros,editRow:editRow,deleteCabeleireiro:deleteCabeleireiro}))))));}}]);return Gestao;}(Component);export{Gestao as default};","map":{"version":3,"sources":["/home/alina/Desktop/UA-3ANO/TQS/projeto_final/tqs-final-project/frontend/src/pages/Gestao.js"],"names":["React","Fragment","Component","AddCabeleireiroForm","EditCabeleireiroForm","CabeleireiroTable","NavbarDono","api","NavbarCliente","Gestao","state","cabeleireiros","currentCabeleireiro","editing","GetSaloons","get","then","res","dataRes","data","n","owner","email","localStorage","getItem","setState","prevState","initialFormState","id","name","postalCode","city","country","status","type","contact","description","address","addCabeleireiro","cabeleireiro","length","deleteCabeleireiro","filter","r","datar","i","service","saloon","parseInt","delete","resser","ressal","updateCabeleireiro","updatedCabeleireiro","map","editRow","setEditing"],"mappings":"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","sourcesContent":["import React, { Fragment, Component} from 'react'\nimport AddCabeleireiroForm from '../crud/AddCabeleireiroForm';\nimport EditCabeleireiroForm from '../crud/EditCabeleireiroForm';\nimport CabeleireiroTable from '../crud/CabeleireiroTable';\nimport NavbarDono from \"../components/NavbarDono\";\nimport '../crud/style.css';\nimport api from \"../services/api\";\nimport NavbarCliente from \"../components/NavbarCliente\";\n\n\nexport default class Gestao extends Component{\n\tstate={\n\t\tcabeleireiros: [],\n\t\tcurrentCabeleireiro:{},\n\t\tediting:false,\n\t};\n\tcomponentDidMount() {\n\t\tthis.GetSaloons();\n\t}\n\n\tGetSaloons (){\n\t\tapi.get(\"/saloon/\").then(res => {\n\t\t\tlet dataRes = res.data;\n\t\t\tfor (const n in dataRes) {\n\t\t\t\tif(dataRes[n].owner.email == localStorage.getItem(\"user_email\")){\n\t\t\t\t\tthis.setState(prevState =>({\n\t\t\t\t\t\tcabeleireiros: [...prevState.cabeleireiros, dataRes[n]]\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\trender() {\n\t\tconst initialFormState = {id: null, name: \"\",postalCode: \"\",city: \"\",country: \"\",status: \"\",type: \"\",contact: \"\",description: \"\",address: \"\"};\n\n\t\t// Setting state\n\t\t/*const [cabeleireiros, setCabeleireiros] = useState(cabeleireirosData);\n\t\tconst [currentCabeleireiro, setCurrentCabeleireiro] = useState(initialFormState);\n\t\tconst [editing, setEditing] = useState(false);*/\n\n\n\n\t\t// CRUD operations\n\t\tconst addCabeleireiro = cabeleireiro => {\n\t\t\tcabeleireiro.id = this.state.cabeleireiros.length + 1\n\t\t\t//this.state.setCabeleireiros([...this.state.cabeleireiros, cabeleireiro])\n\t\t\tthis.setState({\n\t\t\t\tcabeleireiros: [...this.state.cabeleireiros, cabeleireiro],\n\t\t\t});\n\t\t}\n\n\t\tconst deleteCabeleireiro = id => {\n\t\t\tthis.setState({editing: false})\n\n\t\t\t//this.state.setCabeleireiros(this.state.cabeleireiros.filter(cabeleireiro => cabeleireiro.id !== id))\n\t\t\tthis.setState({\n\t\t\t\tcabeleireiros: this.state.cabeleireiros.filter(cabeleireiro => cabeleireiro.id !== id)\n\t\t\t});\n\t\t\tapi.get('/schedule/').then(r =>{\n\t\t\t\tlet datar = r.data;\n\t\t\t\tfor (const i in datar) {\n\t\t\t\t\tif (datar[i].service.saloon.id == parseInt(id)) {\n\t\t\t\t\t\tapi.delete('/schedule/'+datar[i].id).then(res => {\n\t\t\t\t\t\t\tapi.delete('/service/'+datar[i].service.id).then(resser => {\n\t\t\t\t\t\t\t\tapi.delete('/saloon/'+id).then(ressal => {\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst updateCabeleireiro = (id, updatedCabeleireiro) => {\n\t\t\tthis.setState({editing: false})\n\n\t\t\t//this.state.setCabeleireiros(this.state.cabeleireiros.map(cabeleireiro => (cabeleireiro.id === id ? updatedCabeleireiro : cabeleireiro)))\n\t\t\tthis.setState({\n\t\t\t\tcabeleireiros: this.state.cabeleireiros.map(cabeleireiro => (cabeleireiro.id === id ? updatedCabeleireiro : cabeleireiro))\n\t\t\t})\n\t\t}\n\n\t\tconst editRow = cabeleireiro => {\n\t\t\tthis.setState({editing: true})\n\n\t\t\tthis.setState({\n\t\t\t\tcurrentCabeleireiro:{\n\t\t\t\tid: cabeleireiro.id,\n\t\t\t\tname: cabeleireiro.name,\n\t\t\t\tcity: cabeleireiro.city,\n\t\t\t\tpostalCode: cabeleireiro.postalCode,\n\t\t\t\tcountry: cabeleireiro.country,\n\t\t\t\tstatus: cabeleireiro.status,\n\t\t\t\ttype: cabeleireiro.type,\n\t\t\t\tcontact: cabeleireiro.contact,\n\t\t\t\tdescription: cabeleireiro.description,\n\t\t\t\taddress: cabeleireiro.address,\n\t\t\t}\n\t\t})\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{localStorage.getItem(\"user_type\")==\"dono\" ? <NavbarDono></NavbarDono>:<NavbarCliente></NavbarCliente> }\n\t\t\t\t<Fragment>\n\t\t\t\t<NavbarDono></NavbarDono>\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<h1>Gestão dos meus salões</h1>\n\t\t\t\t\t<div className=\"flex-row\">\n\t\t\t\t\t\t<div className=\"flex-large\">\n\t\t\t\t\t\t\t{this.state.editing ? (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t<h2>Editar salão</h2>\n\t\t\t\t\t\t\t\t\t<EditCabeleireiroForm\n\t\t\t\t\t\t\t\t\t\tediting={this.state.editing}\n\t\t\t\t\t\t\t\t\t\tsetEditing={this.state.setEditing}\n\t\t\t\t\t\t\t\t\t\tcurrentCabeleireiro={this.state.currentCabeleireiro}\n\t\t\t\t\t\t\t\t\t\tupdateCabeleireiro={updateCabeleireiro}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t<h2>Adicionar salão</h2>\n\t\t\t\t\t\t\t\t\t<AddCabeleireiroForm addCabeleireiro={addCabeleireiro}/>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-large\">\n\t\t\t\t\t\t\t<h2>Ver salões</h2>\n\t\t\t\t\t\t\t<CabeleireiroTable cabeleireiros={this.state.cabeleireiros} editRow={editRow}\n\t\t\t\t\t\t\t\t\t\t\t   deleteCabeleireiro={deleteCabeleireiro}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t\t\t</>\n\t\t)\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}